---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import LanguageCard from '../../../components/hub/LanguageCard.astro';
import FAQSection from '../../../components/hub/FAQSection.astro';
import { LANGUAGE_HUB_DATA } from '../../../data/language-hub-data';
import { getUITranslations } from '../../../data/ui-translations';
import { SUPPORTED_NATIVE_LANGS, getLanguageForDisplay } from '../../../data/language-info';

const { nativeLang } = Astro.params;
const nativeLanguageCode = nativeLang || 'en';

// Redirect invalid languages to English version
if (!SUPPORTED_NATIVE_LANGS.includes(nativeLanguageCode)) {
  return Astro.redirect('/learn/couples-language-learning/');
}

// Get translations
const text = getUITranslations(nativeLanguageCode);
const nativeInfo = getLanguageForDisplay(nativeLanguageCode, nativeLanguageCode);

// Get top languages sorted by difficulty (easiest first for couples)
const languages = Object.values(LANGUAGE_HUB_DATA)
  .sort((a, b) => a.difficultyRating - b.difficultyRating);

const easiestLanguages = languages.slice(0, 6);

// Translated FAQs
const faqs = [
  {
    question: text.faqCouplesQ1 || "What's the best language for couples to learn together?",
    answer: text.faqCouplesA1 || "Spanish, French, and Italian are excellent choices for couples due to their romantic nature and relative ease. Spanish offers the most practical benefits with 500+ million speakers."
  },
  {
    question: text.faqCouplesQ2 || "How can we stay motivated learning together?",
    answer: text.faqCouplesA2 || "Set shared goals, practice conversations daily, watch movies in your target language together, and plan trips to countries where the language is spoken."
  },
  {
    question: text.faqCouplesQ3 || "Should we learn at the same pace?",
    answer: text.faqCouplesA3 || "Not necessarily. It's natural for one partner to progress faster. The key is supporting each other and using the difference as an opportunity to teach and learn."
  },
  {
    question: text.faqCouplesQ4 || "How much time should we dedicate daily?",
    answer: text.faqCouplesA4 || "Even 15-30 minutes of daily practice together is effective. Consistency matters more than duration."
  }
];

// Hreflang alternates
const hreflangAlternates = SUPPORTED_NATIVE_LANGS
  .filter(lang => lang !== nativeLanguageCode)
  .map(lang => ({
    lang,
    href: `https://www.lovelanguages.io/learn/${lang}/couples-language-learning/`
  }));

const canonicalUrl = `https://www.lovelanguages.io/learn/${nativeLanguageCode}/couples-language-learning/`;

const jsonLd = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": text.couplesPageTitle || "Learn a Language Together - Couples Guide",
  "description": text.couplesPageDesc || "Discover the best languages to learn as a couple.",
  "url": canonicalUrl,
  "inLanguage": nativeLanguageCode,
  "publisher": {
    "@type": "Organization",
    "name": "Love Languages",
    "url": "https://www.lovelanguages.io"
  }
};
---

<BaseLayout
  title={`${text.couplesPageTitle || 'Learn a Language Together'} | Love Languages`}
  description={text.couplesPageDesc || 'Discover why learning a language together strengthens relationships.'}
  nativeLang={nativeLanguageCode}
>
  <Fragment slot="head">
    <link rel="canonical" href={canonicalUrl} />
    <link rel="alternate" hreflang={nativeLanguageCode} href={canonicalUrl} />
    <link rel="alternate" hreflang="x-default" href="https://www.lovelanguages.io/learn/en/couples-language-learning/" />
    {hreflangAlternates.map(alt => (
      <link rel="alternate" hreflang={alt.lang} href={alt.href} />
    ))}
  </Fragment>

  <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />

  <!-- Hero -->
  <header class="bg-gradient-to-b from-pink-50 to-white">
    <div class="max-w-6xl mx-auto px-4 py-12 md:py-20">
      <div class="text-center max-w-3xl mx-auto">
        <span class="text-6xl mb-4 block">üíë</span>
        <h1 class="text-3xl md:text-5xl font-black font-header text-gray-900 mb-4">
          {text.couplesHeroTitle || 'Learn a Language Together'}
        </h1>
        <p class="text-lg md:text-xl text-gray-600 mb-8">
          {text.couplesHeroSubtitle || 'The ultimate guide to making language learning a shared adventure.'}
        </p>
        <a
          href={`/learn/${nativeLanguageCode}/`}
          class="inline-flex items-center gap-2 text-[#4ECDC4] hover:underline"
        >
          ‚Üê {text.backToHub || 'Back to Language Hub'}
        </a>
      </div>
    </div>
  </header>

  <!-- Why Learn Together -->
  <section class="py-12 bg-white">
    <div class="max-w-4xl mx-auto px-4">
      <h2 class="text-2xl md:text-3xl font-bold font-header text-gray-900 mb-8">
        {text.whyLearnTogetherTitle || 'Why Couples Should Learn Languages Together'}
      </h2>

      <div class="grid md:grid-cols-2 gap-6">
        <div class="p-6 bg-gradient-to-br from-accent/5 to-pink-50 rounded-2xl border border-accent/10">
          <span class="text-3xl mb-3 block">üéØ</span>
          <h3 class="font-bold text-gray-900 mb-2">{text.sharedGoalsTitle || 'Shared Goals Build Connection'}</h3>
          <p class="text-gray-600">{text.sharedGoalsDesc || 'Working toward a common goal creates teamwork and deepens your relationship.'}</p>
        </div>

        <div class="p-6 bg-gradient-to-br from-accent/5 to-pink-50 rounded-2xl border border-accent/10">
          <span class="text-3xl mb-3 block">üí¨</span>
          <h3 class="font-bold text-gray-900 mb-2">{text.practicePartnerTitle || 'Built-in Practice Partner'}</h3>
          <p class="text-gray-600">{text.practicePartnerDesc || 'Having a conversation partner available 24/7 accelerates learning.'}</p>
        </div>

        <div class="p-6 bg-gradient-to-br from-accent/5 to-pink-50 rounded-2xl border border-accent/10">
          <span class="text-3xl mb-3 block">‚úàÔ∏è</span>
          <h3 class="font-bold text-gray-900 mb-2">{text.travelTitle || 'Travel Transforms'}</h3>
          <p class="text-gray-600">{text.travelDesc || 'Speaking even basic phrases transforms travel experiences.'}</p>
        </div>

        <div class="p-6 bg-gradient-to-br from-accent/5 to-pink-50 rounded-2xl border border-accent/10">
          <span class="text-3xl mb-3 block">üß†</span>
          <h3 class="font-bold text-gray-900 mb-2">{text.brainHealthTitle || 'Keeps Minds Sharp'}</h3>
          <p class="text-gray-600">{text.brainHealthDesc || 'Language learning is one of the best exercises for brain health.'}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Best Languages for Couples -->
  <section class="py-12 bg-gray-50">
    <div class="max-w-4xl mx-auto px-4">
      <h2 class="text-2xl md:text-3xl font-bold font-header text-gray-900 mb-2">
        {text.bestLanguagesTitle || 'Best Languages for Couples'}
      </h2>
      <p class="text-gray-600 mb-8">
        {text.bestLanguagesSubtitle || 'These languages offer the best combination of romance, practicality, and achievability.'}
      </p>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
        {easiestLanguages.map(lang => (
          <LanguageCard
            code={lang.code}
            name={lang.name}
            nativeName={lang.nativeName}
            flag={lang.flag}
            speakers={lang.speakers}
            difficultyRating={lang.difficultyRating}
            href={`/learn/${nativeLanguageCode}/${lang.code}/`}
          />
        ))}
      </div>
    </div>
  </section>

  <FAQSection faqs={faqs} />

  <!-- CTA -->
  <section class="bg-gradient-to-r from-accent to-pink-500 py-16">
    <div class="max-w-2xl mx-auto px-4 text-center text-white">
      <h2 class="text-3xl font-bold font-header mb-4">
        {text.ctaTitle || 'Ready to Start?'}
      </h2>
      <p class="text-white/90 mb-8">
        {text.ctaSubtitle || 'AI coaching, voice practice, and games designed for two.'}
      </p>
      <a
        href="/"
        class="inline-block bg-white text-accent font-bold px-8 py-4 rounded-full hover:shadow-lg hover:scale-105 transition-all text-lg"
      >
        {text.ctaButton || 'Start Learning Together'}
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-100 border-t border-gray-200 py-12">
    <div class="max-w-6xl mx-auto px-4 text-center">
      <a href="/" class="inline-flex items-center gap-2 text-2xl font-bold font-header text-accent mb-4">
        <img src="/favicon.svg" alt="" class="w-8 h-8" />
        Love Languages
      </a>
      <p class="text-gray-600 mb-6">{text.footerTagline || 'Learn any language together with your partner'}</p>
      <nav class="flex justify-center gap-6 text-sm text-gray-500">
        <a href={`/learn/${nativeLanguageCode}/`} class="hover:text-accent">{text.navBlog || 'Blog'}</a>
        <a href="/tools" class="hover:text-accent">{text.navTools || 'Tools'}</a>
        <a href="/terms" class="hover:text-accent">{text.navTerms || 'Terms'}</a>
        <a href="/privacy" class="hover:text-accent">{text.navPrivacy || 'Privacy'}</a>
      </nav>
    </div>
  </footer>
</BaseLayout>
